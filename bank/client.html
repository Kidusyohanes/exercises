<!DOCTYPE html>
<html>
	<head>

		<script>

			document.addEventListener("DOMContentLoaded", function() {
				console.log("Page Loaded");

				fetch("http://localhost:4444/balance")
					.then( res => res.json() )
					.then( json => {
						document.getElementById("currbal").textContent = json.amt;
					}).catch( err => {
						document.getElementById("currbal").value = "N/A";
					});
			});

			function transact() {
				let amt = document.getElementById("amount").value;

				fetch("http://localhost:4444/balance", {
					"method": "PUT",
					"body": JSON.stringify({
						"amt": amt
					}),
					"headers": {
						"Content-Type": "application/json"
					}
				})
				.then( res => res.json() )
				.then( json => {
					document.getElementById("currbal").textContent = json.amt;
				});

				console.log("Transaction submitted!");

				document.getElementById("amount").value	= 0;
			}

		</script>

	</head>

	<body>

		<h1> Simple Bank Account </h1>

		<h3> Current Balance: $ <span id="currbal">Loading...</span> </h3>

		<span> Update Amount by: $</span> <input id="amount" type="number" placeholder="enter amount e.g. 100 to deposit"/>
		<button  onclick="transact()" > Submit </button>
	</body>

</html>
